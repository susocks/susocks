package main

import (
	"log"
	"net"
)

func init() {
	log.SetFlags(log.Ldate | log.Ltime | log.Llongfile)
}

func main() {
	conn, err := net.Dial("tcp", "127.0.0.1:1080")
	if err != nil {
		return
	}
	_, err = conn.Write([]byte{5, 1, 0})
	if err != nil {
		return
	}
	data := make([]byte, 4096)
	n, err := conn.Read(data)
	if err != nil {
		return
	}
	log.Print(n, data[:n])

	_, err = conn.Write([]byte("\x05\x01\x00\x03\x17\x62\x6c\x6f\x67\x2d\x73\x74\x61\x74\x69\x63\x2e\x63\x6e\x62\x6c\x6f\x67\x73\x2e\x63\x6f\x6d\x01\xbb"))
	if err != nil {
		return
	}
	data = make([]byte, 4096)
	n, err = conn.Read(data)
	if err != nil {
		return
	}
	log.Print(n, data[:n])

	_, err = conn.Write([]byte("\x16\x03\x01\x02\x00\x01\x00\x01\xfc\x03\x03\x03\x8f\x83\xf6\x62" +
		"\x25\x89\x56\xdf\x9f\x84\xf8\xeb\x5f\x68\xfb\x48\xcb\x52\x47\xe5" +
		"\xd9\x37\xab\x5a\xcc\xff\xa7\x33\x55\x92\xf2\x20\x31\x02\xa7\x5f" +
		"\xaf\x4f\x95\xce\x85\xb5\x56\xe7\xcf\xb7\x1a\xc6\x90\x9d\xe1\xd8" +
		"\x48\x93\x7b\x19\xc9\x1b\x7c\x29\x27\x61\x18\xf3\x00\x22\x3a\x3a" +
		"\x13\x01\x13\x02\x13\x03\xc0\x2b\xc0\x2f\xc0\x2c\xc0\x30\xcc\xa9" +
		"\xcc\xa8\xc0\x13\xc0\x14\x00\x9c\x00\x9d\x00\x2f\x00\x35\x00\x0a" +
		"\x01\x00\x01\x91\xba\xba\x00\x00\x00\x00\x00\x1c\x00\x1a\x00\x00" +
		"\x17\x62\x6c\x6f\x67\x2d\x73\x74\x61\x74\x69\x63\x2e\x63\x6e\x62" +
		"\x6c\x6f\x67\x73\x2e\x63\x6f\x6d\x00\x17\x00\x00\xff\x01\x00\x01" +
		"\x00\x00\x0a\x00\x0a\x00\x08\xea\xea\x00\x1d\x00\x17\x00\x18\x00" +
		"\x0b\x00\x02\x01\x00\x00\x23\x00\xc0\x4f\x4e\x4e\x72\x65\x53\x42" +
		"\x62\x70\x76\x79\x77\x6c\x7a\x68\x42\xc7\xa3\x2a\x43\x91\xc2\x69" +
		"\x85\x9d\x23\x87\x67\x44\x47\x3b\x25\xd0\x7a\x8e\x37\x06\x4a\x66" +
		"\x87\x0e\x13\x7b\x84\x40\x56\xda\xec\x61\x43\xef\xfc\x30\x5c\xd4" +
		"\x7e\x04\xf6\x7b\x53\x5a\xf6\x87\x1d\x10\x9d\x9b\xea\xb3\xcd\xfa" +
		"\xcf\x07\xe7\xb1\xb2\xee\x01\x77\x18\xf6\xb0\x5b\xfd\xf9\xc6\x6b" +
		"\xa5\x1d\xdd\x49\xcc\xe8\x98\x69\xfd\x3f\xdc\x7a\x1e\x1c\x79\xb5" +
		"\x09\xfe\xa0\xad\x39\x8b\xa8\xf2\x6d\x73\xf8\xf5\x62\xc1\xa8\x5e" +
		"\x43\x21\x9a\x68\xd0\x09\xae\x02\xd2\x47\x17\x05\x9e\x95\xb0\xe6" +
		"\xf1\x5b\x79\xc3\xfa\xf6\x58\x3c\xa1\x6b\xb5\x83\x9c\xee\x7c\x69" +
		"\x18\x46\xe5\xb2\x8c\xf0\xdc\x5b\xeb\xde\xfc\x93\xe9\xe1\x9c\x0f" +
		"\x4b\x32\x4e\x2b\x5d\xa6\xda\xe1\xdb\xdb\xd9\x73\x60\x2d\x33\xd1" +
		"\x3d\x76\x20\xe6\x44\x3b\x67\x35\xd5\x00\x10\x00\x0e\x00\x0c\x02" +
		"\x68\x32\x08\x68\x74\x74\x70\x2f\x31\x2e\x31\x00\x05\x00\x05\x01" +
		"\x00\x00\x00\x00\x00\x0d\x00\x14\x00\x12\x04\x03\x08\x04\x04\x01" +
		"\x05\x03\x08\x05\x05\x01\x08\x06\x06\x01\x02\x01\x00\x12\x00\x00" +
		"\x00\x33\x00\x2b\x00\x29\xea\xea\x00\x01\x00\x00\x1d\x00\x20\x92" +
		"\xc2\x51\xe0\xa4\xfb\xef\x44\xfc\xde\x82\x83\x39\x26\x1b\x8c\x84" +
		"\x35\x13\xb8\xf0\x6f\x4b\x8c\xb4\xb2\xa8\xf8\x08\xed\x6f\x7a\x00" +
		"\x2d\x00\x02\x01\x01\x00\x2b\x00\x0b\x0a\xaa\xaa\x03\x04\x03\x03" +
		"\x03\x02\x03\x01\x00\x1b\x00\x03\x02\x00\x02\xfa\xfa\x00\x01\x00" +
		"\x00\x15\x00\x01\x00"))
	if err != nil {
		return
	}
	data = make([]byte, 4096)
	n, err = conn.Read(data)
	if err != nil {
		return
	}
	log.Print(n, data[:n])

}
